<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Producto - ShinyWeb</title>
  <link rel="stylesheet" href="css.css">

  <!-- model-viewer -->
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <!-- main con l√≥gica de productos -->
  <script src="main.js" defer></script>
</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="logo">
        <h1>‚ú®ShinyWeb</h1>
      </div>
      <div>
        <a href="index.html" class="btn-back">‚Üê Volver</a>
        <a href="carrito.html" class="btn-cart">
          Carrito <span class="cart-count" id="cartCount">0</span>
        </a>
      </div>
    </div>
  </nav>

  <!-- CONTENIDO DEL PRODUCTO -->
  <main class="product-detail-container">
    <div class="product-detail-grid">

      <!-- VISOR 3D -->
    <div class="product-detail-viewer" id="productViewer"></div>

      <!-- INFORMACI√ìN DEL PRODUCTO -->
      <div class="product-detail-info">
        <h1 id="productName">Cargando...</h1>
        <p class="product-price" id="productPrice">0.00 ‚Ç¨</p>

        <div class="product-description">
          <h3>Descripci√≥n</h3>
          <p id="productDescription">Cargando descripci√≥n...</p>
        </div>

        <div class="product-features">
          <h3>Caracter√≠sticas</h3>
          <ul id="productFeatures"></ul>
        </div>

        <div class="product-actions">
          <button class="btn-add-cart-large" id="btnAddDetail">
            üõí A√ëADIR AL CARRITO
          </button>
          <button class="btn-buy-now" id="btnBuyNow">
            COMPRAR AHORA
          </button>
        </div>
      </div>

    </div>
  </main>

  <!-- SCRIPTS ESPEC√çFICOS DE ESTA P√ÅGINA -->
  <script src="cart.js"></script>

  <script>
    // ID del producto desde la URL
    const params = new URLSearchParams(window.location.search);
    const productIdFromUrl = parseInt(params.get('id'), 10);

    document.addEventListener('DOMContentLoaded', () => {
      // Cargar datos del producto y modelo 3D
      if (!isNaN(productIdFromUrl)) {
        loadProductDetail(productIdFromUrl);
      }

      // Botones de acciones
      const btnAddDetail = document.getElementById('btnAddDetail');
      const btnBuyNow = document.getElementById('btnBuyNow');

      if (btnAddDetail) {
        btnAddDetail.addEventListener('click', () => {
          addToCart(productIdFromUrl);   // misma funci√≥n que en el index
        });
      }

      if (btnBuyNow) {
        btnBuyNow.addEventListener('click', () => {
          addToCart(productIdFromUrl);   // a√±ade al carrito
          window.location.href = 'carrito.html';
        });
      }
    });
  </script>
</body>
</html>
